# bigDataVisualization
aoligei

20200627
界面展示使用的是django框架，画图使用的pyecharts这个库。推荐pyecharts的官方网页：https://pyecharts.org/，里面详细的介绍了如何将django和pyecharts这个库结合使用。Algorithm文件夹里面是调度算法的部分，其余是有关界面展示的部分，主要看demotest文件中的urls.py和views.py，以及templates文件中的index.html文件。
 
city_city.csv：华为实际在线流量数据，第一列是一个unix时间戳，代码里面用函数转换成正常的时间格式，可以发现没两条数据的时间戳的值相差600000，实际上是没两条数据的时间间隔是10分钟。第二列是流量大小，单位是字节；

task.txt：传输任务是调度的离线任务，在这个项目里面，我们拿到的是在线流量数据，根据在线流量数据和链路的带宽，生成离线流量任务；
（任务编号，[这个1不用管，任务开始时间，任务结束时间，传输离线流量大小，起始点，结束点]）

在线流量：指需要及时响应的，比如用户搜索这种；
离线流量：数据中心之间的数据备份（用户日志、照片共享等），数据量比较大，不需要紧急传输；
*这两种流量同时存在，想要达到的效果是在能够积极响应在线流量任务的同时，利用剩余的带宽去传输离线流量任务。

Views.py主要是后端逻辑，显示地图和将数据转为json格式。
views.py
//定义地图展示函数map_base(),返回Geo类型的变量
def map_base() -> Geo:
    c=(
        Geo() //使用Geo()方法
.添加模式( 
            地图类型为“china”,
            规定背景颜色为白色,
        )
		//添加数据中心参数
        .add( 
			  "",
            [("地点", 数据)],//地理位置列表，数据的值为0
            显示样式为涟漪模式,
            颜色红色,
            点的参数设置(
                显示点的名称, 名称展示位置（上、下、左、右）
            ),
        )
		//添加链路参数
		.add(
            "链路集名称",
            [("起始点", "终点")],
            不展示链路名称,
        )
		LINES类型的线,
            涟漪特效配置(
                样式为箭头,特效大小
            ),
            线样式配置(
                不显示线名称, 宽度0.5, 弯曲度0.05, 透明度0.1,
            ),
		)
	return c //返回所有设定，数据类型为Geo



Index.html中主要是显示前端界面，每5秒钟调用一次Ajax请求刷新数据。
使用Ajax实现异步刷新，对每条链路上剪头特效的大小进行更改。设置计时器每5秒钟调用一次ajax请求，只更新指定参数。setInterval(getDynamicData26,5000);计时器使用的是这个函数。
Index.html
//部分区域刷新
function getDynamicData() {
                $.ajax({
                    请求类型为GET,
                    url地址,
                    json数据类型,
                    若成功: 函数 (后端传回的json数据) {
                        获取当前的地图数据;
                 		将传回的json数据赋给需要更改的数据;
                        更新地图数据;
                    }
                });


